# AWS VPC 구성해보기

- 구성도

  ![vpc구성도](https://user-images.githubusercontent.com/47243329/125371450-b8939000-e3bb-11eb-9992-b394c76e962b.jpg)



1. vpc 만들기
2. subnet 만들기
3. internet gateway 만들기
4. IGW를 VPC에 연결
5. 각 서브넷 규칙에 맞는 보안그룹 만들어주기
6. 라우팅테이블 만들기
7. RT를 서브넷과 연결시키기

------

### 기타 용어정리

- **LAN, WAN**

  1. LAN(Local Area Network) : 거점내 네트워크. 직점 구축하고 관리해야함
  2. WAN(Wide Area Network) : 거점인 LAN끼리 서로 연결. 통신사업자가 구축하고 관리

- **Route table**

  : 다른 네트워크에 데이터를 보내려면 네트워크를 서로 연결하는 라우터로 전송하게 됨. 망간 통신

  - 라우터가 전송할 대상이 되는 데이터는 IP 패킷(TCP/IP 계층에서 인터넷층에 속함)

- VPC는 region단위 Subnet은 AZ(자신의 Data Center안에서만 통신하게)단위

- **Tenant**

  : 소프트웨어 인스턴스에 대해 공통이 되는 특정 접근 권한을 공유하는 사용자

  - 멀티 테넌시란 하나의 소프트웨어 인스턴스로 여러 고객에게 서비스를 제공하기 위한 아키텍쳐 그 자체

- **DHCP**

  : 설정을 자동화하는 프로토콜

  - DHCP 클라이언트의 호스트가 네트워크에 접속하면 DHCP 서버와 메세지를 주고받으면서 자동으로 TCP/IP 설정 진행
    1. DHCP DISCOVER : DHCP 서버가 있나요 있으면 사용할 수 있는 TCP/IP 설정을 알려주세요
       - TCP/IP 설정 항목 : IP 주소, 서브넷 마스크, 기본 게이트웨이 IP주소 DNS 서버의 IP 주소
    2. DHCP OFFER : 사용할 수 있는 TCP/IP 설정은 이것입니다. 확인해주세요
    3. DHCP REQUEST : 그 IP 주소를 사용하게 해주세요
    4. DHCP ACK : 네

- **A/B/C class**

  - A클래스 : 0.0.0.0 - 127.255.255.255 주소범위와 255.0.0.0의 서브넷마스크
  
  - B클래스 : 128.0.0.0 - 191.255.255.255 주소범위와 255.255.0.0 의 서브넷마스크
  
  - C클래스 : 192.0.0.0 - 223.255.255.255 주소범위와 255.255.255.0

- **CIDR** : 클래스 없는 도메인 간 라우팅 기법

  - 10.0.1.0/24 -> 앞쪽 24비트를 hostID로 사용함
  - 10.0.0.0/25 -> 앞쪽 25비트를 hostID로 사용하여 2^7개의 ip 사용가능

- **네트워크 브로드캐스트 주소** 

  : 같은 네트워크 상의 모든 호스트에 완전히 똑같은 데이터를 전송하는 것이 브로드캐스트. IP 헤더의 목적지 IP 주소에 브로드캐스트 IP 주소를 지정하면 같은 네트워크 상의 모든 호스트에 데이터를 전송가능

- **Subnet mask**

  : IP 주소는 전반의 네트워크부와 후반의 호스트부로 구성되는데 네트워크부와 호스트부의 구분은 고정된 것이 아니라 가변적이다. 32비트의 IP주소 어디까지가 네트워크부인지 명시한 것이 서브넷 마스크

  - 네트워크부(네트워크주소) : 각 네트워크 식별
  - 호스트부(호스트 주소) : 네트워크 내 호스트를 식별(다 1이면 브로트캐스트)

- **Egress only internet gateways와 NAT gateway의 차이점**

  : Ipv6 지원 유무.

- **NAT Gateway**

  : 프라이빗 서브넷의 인스턴스는 퍼블릭 서브넷에 있는 NAT게이트웨이를 사용하여 인터넷에 액세스

- **NAT 이중화**

  : 하나의 가용영역 자체가 장애시에는 다른 가용영역에서 해당 NAT(Network Address Translation)를 통해서 인터넷에 접근하는 구조

- **NACL (Network ACL)**

  : 서브넷 단위의 외부간 통신을 담당하는 보안기능

  - 기본 네트워크 ACL은 연결된 서브넷을 드나드는 트래픽 흐름을 모두 허용하도록 구성

